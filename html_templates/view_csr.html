{% extends "layout.html" %}
{% block content %}
  <h1 class="mb-4">CSR Details (ID: {{ csr.id }})</h1>
  <div class="row">
    <div class="col-md-6">
      <p><strong>Name:</strong> {{ csr.name }}</p>
      <p><strong>Key:</strong> {{ key.name if key else "N/A" }}</p>
      <p><strong>Profile:</strong> {{ profile.filename if profile else "N/A" }}</p>
      {% if profile %}
        <h2 class="mt-4">Profile Details</h2>
        <p><strong>Template Name:</strong> {{ profile.template_name }}</p>
        {% if profile_content %}
          <h4>Profile Configuration Content</h4>
          <pre style="max-width: 520px; white-space: pre-wrap;">{{ profile_content }}</pre>
        {% else %}
          <p>No configuration content available.</p>
        {% endif %}
      {% endif %}
      <p><strong>Created At:</strong> {{ csr.created_at_local.strftime('%Y-%m-%d %H:%M %Z') if csr.created_at_local else '' }}</p>
    </div>
    <div class="col-md-6">
      {% if profile %}
        <div class="mt-4"></div>
      {% endif %}
      <h2 class="mt-0">CSR (PEM)</h2>
      <div class="d-flex justify-content-start">
        <button type="button" class="btn btn-sm btn-outline-secondary" data-copy-target="csr-pem-pre">Copy</button>
      </div>
      <pre id="csr-pem-pre">{{ csr.csr_pem }}</pre>
    </div>
  </div>
  <a href="{{ url_for('requests.list_csrs') }}" class="btn btn-secondary mt-3">Back to CSR List</a>
{% endblock %}

