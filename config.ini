[DEFAULT]
# general Flask settings
SECRET_KEY = wGr9k6auPz9MrOq-h22tBTIdRFWYMeY-cO38oul3zPhgFBwE4J0kRDR5tK4FDNME
# HTTP port for unauthenticated OCSP
http_port = 80
max_idle_time = 30m
# Allow/disallow self-registration (controls /users/register route and Register link)
allow_self_registration = true

[LOGGING]
# Logging level: TRACE (5), DEBUG (10), INFO (20), WARNING (30), ERROR (40), CRITICAL (50)
# TRACE: Very verbose - includes idle checks, session tracking
# DEBUG: Detailed diagnostic information
# INFO: General informational messages
# WARNING: Warning messages
# ERROR: Error messages
# CRITICAL: Critical errors
log_level = INFO
log_file = logs/server.log


[CA]
# Which subordinate CA to use by default: "EC" or "RSA"
mode = RSA
# Paths for both modes; the get_ca_config() helper below will pick the right
SUBCA_KEY_PATH_EC    = pki-subca/rad_ca_sub_ec.key
SUBCA_CERT_PATH_EC   = pki-subca/rad_ca_sub_ec.crt
CHAIN_FILE_PATH_EC   = pki-subca/rad_chain_ec.crt
SUBCA_KEY_PATH_RSA   = pki-subca/rad_ca_sub_rsa.key
SUBCA_CERT_PATH_RSA  = pki-subca/rad_ca_sub_rsa.crt
CHAIN_FILE_PATH_RSA  = pki-subca/rad_chain_rsa.crt
ROOT_CERT_PATH       = pki-root/rad_ca_root.crt

[VAULT]
# HashiCorp Vault integration for CA key isolation
# Set enabled=false to use traditional file-based keys (current behavior)
# Set enabled=true to use Vault PKI engine (enhanced security with key isolation)
enabled = false

# Vault server connection settings (required when enabled=true)
# For same server: http://127.0.0.1:8200 (dev mode without TLS)
# For separate server: https://192.168.1.20:8200
address = http://127.0.0.1:8200

# Authentication credentials (read from environment variables for security)
# Set these as environment variables: VAULT_ROLE_ID and VAULT_SECRET_ID
role_id = ${VAULT_ROLE_ID}
secret_id = ${VAULT_SECRET_ID}

# PKI mount paths in Vault
pki_rsa_path = pki-subca-rsa
pki_ec_path = pki-subca-ec

# Transit engine path for custom signing operations (OCSP, PQC)
transit_path = transit

# Connection settings
timeout = 30
retry_attempts = 3

# TLS settings
verify_ssl = true
ca_cert_path = 

# Vault roles for different operations
role_scep = scep-enrollment
role_est = est-enrollment
role_default = server-cert

[LDAP]
#testing LDAP server
;LDAP_HOST = 172.18.178.24
;LDAP_PORT = 389
;BASE_DN = dc=rnd-rad,dc=com
;PEOPLE_DN = ou=People,dc=rnd-rad,dc=com
;ADMIN_DN = cn=Manager,dc=rnd-rad,dc=com
;ADMIN_PASSWORD = marketing
enabled = false

# intergartion to actual server 
;LDAP_HOST = ad.rad.co.il
;LDAP_PORT = 389
;BASE_DN = DC=ad,DC=rad,DC=co,DC=il
;PEOPLE_DN = CN=Users,DC=ad,DC=rad,DC=co,DC=il
;ADMIN_DN = CN=pikaldaps,CN=Users,DC=ad,DC=rad,DC=co,DC=il
;ADMIN_PASSWORD = 
;enabled = true

[SCEP]
# enable or disable SCEP entirely
enabled = true
# optional path to a file where we persist the serial across restarts
serial_file = pki-subca/serial.txt
# Dump directory for raw SCEP requests (optional)
dump_dir = pki-subca/dumps

# Challenge-password feature
challenge_password_enabled = true
# Validity period for challenge-passwords (default: 60m)
challenge_password_validity = 2m

[HTTPS]
# HTTPS certificate & key for your main CA UI
ssl_cert = pki-https/tls.cert.pem
ssl_key  = pki-https/tls.key.pem
port     = 443

[TRUSTED_HTTPS]
# HTTPS certificate & key for your main CA UI
#trusted_ssl_cert = pki-https/pikachu_issued_https.crt
trusted_ssl_cert = pki-https/pikachu_issued_https_localhost.crt
trusted_ssl_key  = pki-https/pikachu_issued_https.key
trusted_port     = 4443

[PATHS]
# everything else that was hard-coded
crl_path       = pki-misc/crl.pem
server_ext_cfg = pki-misc/server_ext.cnf
validity_conf  = pki-misc/validity.conf
#db_path        = db/pikachu-ca.db
#db_path        = db/new.db
#db_path        = db/certs.db
#db_path        = db/certs1.db
#db_path        = db/2migrate.db
db_path        = db/migrate.db
